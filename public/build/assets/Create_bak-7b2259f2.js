import{o as q,r as V,b as g,c as k,f as s,g as a,m as i,e as c,n as x,k as t,J as m,F as _,p,t as n,l as D,D as E}from"./app-50c7315c.js";import{g as M}from"./common-1ae50ed3.js";const S=["onSubmit"],U=t("br",null,null,-1),B=t("br",null,null,-1),T=t("br",null,null,-1),w=["value"],A=t("br",null,null,-1),F=t("br",null,null,-1),I=t("br",null,null,-1),L=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"商品名"),t("th",null,"金額"),t("th",null,"数量"),t("th",null,"小計")])],-1),N=["onUpdate:modelValue"],P=["value"],C=t("br",null,null,-1),J=t("br",null,null,-1),j=t("button",null,"登録する",-1),H={__name:"Create_bak",props:{customers:Array,items:Array},setup(h){const y=h;q(()=>{u.date=M(),y.items.forEach(l=>{r.value.push({id:l.id,name:l.name,price:l.price,quantity:0})})});const r=V([]),u=g({date:null,customer_id:null,status:!0,items:[]}),b=k(()=>{let l=0;return r.value.forEach(o=>{l+=o.price*o.quantity}),l}),v=()=>{r.value.forEach(l=>{l.quantity>0&&u.items.push({id:l.id,quantity:l.quantity})}),E.Inertia.post(route("purchases.store"),u)},f=["0","1","2","3","4","5","6","7","8","9"];return(l,o)=>(s(),a("form",{onSubmit:D(v,["prevent"])},[i(" 日付"),U,c(t("input",{type:"date",name:"date","onUpdate:modelValue":o[0]||(o[0]=e=>u.date=e)},null,512),[[x,u.date]]),B,i(" 会員名"),T,c(t("select",{name:"customer","onUpdate:modelValue":o[1]||(o[1]=e=>u.customer_id=e)},[(s(!0),a(_,null,p(h.customers,e=>(s(),a("option",{value:e.id,key:e.id},n(e.id)+" : "+n(e.name),9,w))),128))],512),[[m,u.customer_id]]),A,F,i(" 商品・サービス"),I,t("table",null,[L,t("tbody",null,[(s(!0),a(_,null,p(r.value,e=>(s(),a("tr",null,[t("td",null,n(e.id),1),t("td",null,n(e.name),1),t("td",null,n(e.price),1),t("td",null,[c(t("select",{name:"quantity","onUpdate:modelValue":d=>e.quantity=d},[(s(),a(_,null,p(f,d=>t("option",{value:d},n(d),9,P)),64))],8,N),[[m,e.quantity]])]),t("td",null,n(e.price*e.quantity),1)]))),256))])]),C,i(" 合計："+n(b.value)+" 円",1),J,j],40,S))}};export{H as default};
